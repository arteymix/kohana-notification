var Notification={DANGER:"danger",SUCCESS:"success",INFO:"info",WARNING:"warning",errors:{},notifications:[],add:function(level,message){notification={level:level,message:message};this.notifications+=[notification];return $("#notifications").append(Notification.format(notification)).children(":last")},addErrors:function(field,errors){if(field in this.errors){this.errors[field]=$.merge(Notification.errors[field],errors)}else{this.errors[field]=errors}this.formatError(field,errors)},format:function(notification){return $("<div/>").attr(notification.attributes).addClass("alert").addClass("alert-"+notification.level).html(notification.message)},applyErrors:function(field,errors){var input=$("[name='"+field+"']");if(input.size()===0){input=$("[name$='["+field+"]']")}if(input.size()===0){input=$("[name*='["+field+"]']")}if(input.size()===0){input=$("[name^='"+field+"']")}var controlGroup=input.parents(".form-group").first().addClass("text-danger");errors=$.isArray(errors)?errors:[errors];$.each(errors,function(index,message){if($.isArray(message)){for(subField in message){subField=field==="_external"?subField:field+"["+subField+"]";Notification.applyErrors(subField,message[subField])}}else{controlGroup.append($("<p/>").html(message.charAt(0).toUpperCase()+message.slice(1)+"."))}})}};(function($){$(document).ready(function(){for(index in Notification.notifications){$("#notifications").append(Notification.format(Notification.notifications[index]))}$.each(Notification.errors,Notification.applyErrors)})})(window.jQuery);